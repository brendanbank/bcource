{% extends 'form.html' %}

{% set menu="New Message" %}

{% block nav %}
    {% include 'nav.html' %}
{% endblock %}


{% block formheader %}
<div class="modal fade" id="settingModel" tabindex="-1" aria-labelledby="settingModelLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="settingModelLabel">
               <h3 class="text-center">{{ form.form_description }}</h3>
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
{% endblock %}

{% block formfooter %}
      </div>
      <div class="modal-footer">
        <button onclick="this.blur();" type="button" class="btn btn-secondary" data-bs-dismiss="modal">{{_('Close')}}</button>
        <button onclick="this.blur();" type="submit" class="btn btn-primary">{{_('Send')}}</button>

      </div>
    </div>
  </div>
</div>
</form>
{% endblock %}


{% block css_content %}
     {% include 'ckeditor-css.html' %}
{% endblock %}

{% block js %}
     {% include 'ckeditor-js.html' %}

<script type="text/javascript">
// Do this before you initialize any of your modals

$(window).on('load', function() {
    
    $('#envelop_tos').select2({
        placeholder : 'start typing',
//        minimumInputLength: 1,
        dropdownParent: $('#settingModel'),
        containerCssClass : "myFont",
         dropdownAutoWidth: 'true',
         width: '100%',

        ajax : {
             url : "{{url_for('user_bp.search')}}",
             dataType : 'json'
        // Additional AJAX parameters go here; see the end of this chapter for the full code of this example
        }
   });

   //$('#envelop_tos').select2('data');
	$('#settingModel').modal('show', {focus: false});

	
    const settingModel = document.getElementById('settingModel')
    settingModel.addEventListener('hide.bs.modal', event => {
     setTimeout(function(){window.location.href = document.getElementById('url').value;},2);
    })

});



</script>
 
{% endblock %}






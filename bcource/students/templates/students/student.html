{% extends 'form.html' %}

{% block nav %}
    {% include 'nav.html' %}
{% endblock %}

{% block formheader %}
<div class="modal fade" id="studentModal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="studentModalLabel">
			<h3 class="text-center">{{ form.form_description }}</h3>
        </h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
{% endblock %}

{% block formfooter %}
      </div>
      <div class="modal-footer">
        <button onclick="this.blur();" type="button" class="btn btn-secondary" data-bs-dismiss="modal">{{_('Close')}}</button>
        <button onclick="this.blur();" type="submit" class="btn btn-primary">{{_('Save changes')}}</button>

      </div>
    </div>
  </div>
</div>
</form>
{% endblock %}

{% block js_content %}
{% endblock %}


{% block js %}
<script>

$(window).on('load', function() {
    $('#studentModal').modal({keyboard: false});
    $('#studentModal').modal('show')
	
    const studentModal = document.getElementById('studentModal')
    studentModal.addEventListener('hidePrevented.bs.modal', event => {
    	const url =  document.getElementById('url').value;
    	$('#studentModal').blur();
    	$('#studentModal').modal('hide');
    	console.log (url)
        window.location.replace('http://127.0.0.1:5001/students/');
    })

    studentModal.addEventListener('hidden.bs.modal', event => {
    	const url =  document.getElementById('url').value;
    	$('#studentModal').blur();
    	console.log (url)
        window.location.replace('http://127.0.0.1:5001/students/');
    })
});


</script>

{% endblock %}

